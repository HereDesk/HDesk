(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{939:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"row",staticStyle:{"margin-top":"10%"},attrs:{id:"setpasswd"}},[a("div",{staticClass:"col-xl-4 col-lg-4 col-md-4 col-12 offset-xl-4 col-lg-4 offset-md-4"},[a("form",[a("div",{staticClass:"form-group input-group-control"},[t._m(0),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.UserData.email,expression:"UserData.email",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"email",id:"user_email",name:"email",placeholder:"Email",maxlength:"30",minlength:"8",required:"",autocomplete:"off"},domProps:{value:t.UserData.email},on:{change:function(e){t.isCheckInput(e)},input:function(e){e.target.composing||t.$set(t.UserData,"email",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group input-group-control"},[t._m(1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.UserData.realname,expression:"UserData.realname",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"user_realname",name:"user_realname",placeholder:"真实姓名",maxlength:"8",minlength:"3",required:"",autocomplete:"off"},domProps:{value:t.UserData.realname},on:{change:function(e){t.isCheckInput(e)},input:function(e){e.target.composing||t.$set(t.UserData,"realname",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group input-group-control"},[t._m(2),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.UserData.group,expression:"UserData.group"}],staticClass:"select-control form-border-bottom",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.UserData,"group",e.target.multiple?a:a[0])},function(e){t.isCheckInput(e)}]}},t._l(t.UserGroup,function(e){return a("option",{key:e.id,domProps:{value:e.group}},[t._v(t._s(e.name))])}))]),t._v(" "),a("div",{staticClass:"form-group input-group-control"},[t._m(3),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.UserData.position,expression:"UserData.position"}],staticClass:"select-control form-border-bottom",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.UserData,"position",e.target.multiple?a:a[0])},function(e){t.isCheckInput(e)}]}},t._l(t.position_list,function(e){return a("option",{key:e.id,domProps:{value:e.value}},[t._v(t._s(e.name))])}))]),t._v(" "),a("div",{staticClass:"form-group input-group-control"},[t._m(4),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.UserData.password,expression:"UserData.password",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"password",id:"user_init_passwd",name:"user_init_passwd",placeholder:"初始密码不能为纯数字",maxlength:"16",minlength:"6",required:"",autocomplete:"off"},domProps:{value:t.UserData.password},on:{change:function(e){t.isCheckInput(e)},input:function(e){e.target.composing||t.$set(t.UserData,"password",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"form-group input-group-control"},[a("button",{staticClass:"btn-control btn-success",attrs:{type:"button"},on:{click:t.SubmitUser}},[t._v("提交")])])])])])])};s._withStripped=!0;var r=a(4),i=a.n(r),n={head:function(){return{title:"HDesk - 增加用户"}},layout:"head",data:function(){return{msg:"",isButtonStatus:!0,showModal:!1,UserGroup:[],position_list:[{name:"管理层",value:"manager"},{name:"测试",value:"test"},{name:"android",value:"android"},{name:"ios",value:"ios"},{name:"web/H5",value:"web/H5"},{name:"产品",value:"pm"},{name:"服务端",value:"server"},{name:"设计",value:"design"},{name:"其它",value:"other"}],UserData:{email:"",password:"",realname:"",group:"",position:""}}},created:function(){var t=this;i.a.get("/api/user/group").then(function(e){2e4===e.data.status&&(t.UserGroup=e.data.data)})},methods:{isCheckInput:function(t){this.UserData.email.length>0&this.UserData.group.length>0&this.UserData.password.length>0&this.UserData.realname.length>0?this.isButtonStatus=!1:this.isButtonStatus=!0},SubmitUser:function(){var t=this.UserData.email,e=this.UserData.password,a=this.UserData.realname,s=this.UserData.group;if(t.length<8|t.length>30)return this.$notify.error({title:"错误",message:"Email的有效长度为8到30位"});if(e.length<6|e.length>16)return this.$notify.error({title:"错误",message:"密码的有效长度为6到16位"});if(a.length<2|a.length>8)return this.$notify.error({title:"错误",message:"姓名的有效长度为2到8位"});if(0===s.length)return this.$notify.error({title:"错误",message:"用户组必须填写，不能为空"});var r=this;i()({method:"post",url:"/api/user/add",data:JSON.stringify(r.UserData)}).then(function(t){2e4===t.data.status?(r.$notify.success({title:"增加成功",message:t.data.msg}),r.$router.push("/app/user-management/user")):r.$notify.error({title:"增加失败",message:t.data.msg})})}}},o=a(10),l=Object(o.a)(n,s,[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"user_email"}},[this._v("电子邮箱"),e("span",{staticClass:"text-red"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"user_realname"}},[this._v("真实姓名"),e("span",{staticClass:"text-red"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"user_group"}},[this._v("选择群组"),e("span",{staticClass:"text-red"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"user_position"}},[this._v("岗位/职位"),e("span",{staticClass:"text-red"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"user_init_passwd"}},[this._v("初始密码"),e("span",{staticClass:"text-red"},[this._v("*")])])}],!1,null,null,null);l.options.__file="adduser.vue";e.default=l.exports}}]);