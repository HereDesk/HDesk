(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{453:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAATlBMVEUAAACVlZWJiYmKioqKioqKioqJiYmJiYmEhISKioqJiYmJiYmAgICKioqKioqWlpaJiYmKioqKioqKioqKioqKioqKioqJiYmVlZWKioqd4R2GAAAAGXRSTlMAA56WvK6njwiHtMIK8aEFpIDlx3lt1VsMdYPIJQAAAMxJREFUSMft1MsOgjAQheFpCxSqoNzU8/4vamomYshJOi5JOEv8v41MkHNH33OKTviWaSVPH0DNRQR68rgDcHe8RyLPXVJB+rkVJuosWF9pT4XnvVV0u56KsOtvImWx9WnruWgAxJ/eSWkqck9fJRedyKi9VSwAGt5zkXsxb8j9IPb5DPxfvQp7nyq78J97aM3C6z1Yhdd7sIqg7/crgq1XcSmJsLuHa0EEvQerCHoPTJT7shj1T6RiJD/0tM9i5p/KtY/C96pQy7mD7w0CphQ7TdUJjQAAAABJRU5ErkJggg=="},456:function(t,e,a){var i=a(918);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a(20).default)("d61edc54",i,!1,{sourceMap:!1})},917:function(t,e,a){"use strict";var i=a(456);a.n(i).a},918:function(t,e,a){(t.exports=a(19)(!1)).push([t.i,"\n@media (min-width:768px){\n.mobile-action-bar{margin-right:2rem\n}\n}\n@media (max-width:575.98px){\n.mobile-action-bar{margin-left:1rem;margin-top:1rem!important\n}\n}\n@media (min-width:1200px){\n.bd-sidebar{flex:0 1 320px\n}\n}\n@media (min-width:768px){\n.bd-sidebar{border-right:1px solid rgba(0,0,0,.1);height:calc(100vh - 4rem);position:-webkit-sticky;position:sticky;top:4rem;z-index:1000\n}\n}\n.bd-sidebar{border-bottom:1px solid rgba(0,0,0,.1);order:0\n}\n.countdata-title{font-size:1.4rem;font-weight:500;margin-bottom:2rem;text-align:center\n}\n.countdata-num{color:#2b2b2b;font-size:2.5rem\n}\n.countdata-desc{color:#757575;font-size:.95rem;font-weight:300\n}\n.center-circle{background-color:#fff;border-radius:50%;height:6.6rem;line-height:6.6rem;width:6.6rem\n}\n.center-circle-success{border:.5rem solid red\n}\n.center-circle>.center-circle-text{position:relative;text-align:center\n}\n.satellite_info{color:#707070!important;font-size:.95rem!important\n}\n.satellite_info label{line-height:1.8rem;margin-right:1rem;min-width:5rem;text-align:left\n}\n.standline{background-color:#673ab7\n}\n.redline,.standline{float:left;height:1.1rem;width:3px\n}\n.redline{background-color:#f44336\n}\n.successline{background-color:#4caf50\n}\n.grayline,.successline{float:left;height:1.1rem;width:3px\n}\n.grayline{background-color:#b1bec6\n}\n.page-bug-add-title img{display:inline-block;float:right;height:33px;margin:1rem 1rem 1rem 0;width:33px\n}\n.page-bug-add-title h3{display:inline-block;font-weight:300!important;margin:1rem 0\n}\n.bug-label{text-align:right!important\n}\n@media (max-width:576px){\n.bug-label{text-align:left!important\n}\n}\n@media (max-width:768px){\n#bug-search,#TestCaseSearchInput{display:none\n}\n}\n@media (max-width:414px){\n#TestCaseTodayCount{display:none\n}\n}\n.hiddenSearch{display:none;visibility:hidden\n}\n.showSearch{display:flex;visibility:visible\n}\n.searchIcon img{height:24px;width:24px\n}\n.tableOpreate{display:none\n}\n.showBugOpreate{background-color:inherit;display:inline;margin-left:-7rem;margin-top:-1rem;position:absolute\n}\n.showBugOpreate button{background:inherit;border:none;display:inline-block;outline:none;z-index:9999\n}\n.showCaseOpreate{background-color:inherit;display:inline;margin-left:-5rem;margin-top:-1rem;position:absolute\n}\n.showCaseOpreate button{background:inherit;border:none;display:inline-block;margin-right:.5rem;outline:none;z-index:9999\n}\n.details-title{color:#333;font-size:1.35rem;font-weight:400!important;line-height:2rem\n}\n@media(max-width:576px){\n.bug-details-title{font-size:1.2rem\n}\n}\n.bug-details-minor-title{color:#333;font-size:1.1rem;font-weight:500\n}\n.details-block{background-color:#fafafa;border-radius:5px;color:#2b2b2b;font-size:.94rem;line-height:2rem;margin-top:1rem;padding:1rem\n}\n.details-block a{color:#2973b7!important\n}\n#testcase-modules .el-input__inner{height:2.5rem!important\n}\n.pg-modules{border-right:1px solid #eee\n}\n@media (max-width:576px){\n.pg-modules{display:none\n}\n}\n.t-manage-modules p,a{display:inline\n}\n.t-manage-modules a{float:right;margin-right:2rem\n}\n.t-manage-modules p:hover{color:#1e88e5\n}\n.t-modules-list{-ms-overflow-style:none;height:70vh;margin-bottom:5rem;opacity:1;overflow:-moz-scrollbars-none;overflow-x:hidden;overflow-y:scroll;position:relative;width:100%\n}\n.t-modules-list::-webkit-scrollbar{width:0\n}\n.pg-test-edit>textarea{background-color:#f5f5f5!important\n}\n.add-icon{clear:none;margin-right:5%;margin-top:-2rem;position:absolute;right:0;z-index:1\n}\n.test-case-category{margin:0;padding:0\n}\n.test-case-category li{display:inline;list-style:none;margin-right:1rem\n}\n.p-content-details{background-color:#fff;border-left:5px solid #43a047;margin-top:1.8rem;min-height:5rem;padding:1rem 1rem 1rem 1.5rem\n}\n.p-content-details pre{line-height:1.6rem;margin-left:.2rem\n}\n.p-content-tags{background-color:#f3e5f5;border-radius:10px;color:#6a1b9a;display:inline;font-size:.9rem;font-weight:400;padding:3px\n}\n.radio-inline{padding-left:1rem\n}\n.testcase_add label{font-size:1.1rem;margin:1rem 0 1rem .6rem\n}\n.testcase-category,.testcase-priority{background-color:#fff;border:1px solid #eee;line-height:1.5rem\n}\n.testcase-label{text-align:right!important\n}\n@media (max-width:576px){\n.testcase-label{text-align:left!important\n}\n}\n.paragraph-headings{margin:0 0 1.5rem\n}\n.t-test-main{border-bottom:1px solid #f5f5f5;margin-top:0\n}\n.t_test_main_open{margin-bottom:1rem;margin-top:1rem\n}\n.t-testcase-title{background-color:#fff;color:#000;display:block;font-size:.97rem;height:3.5rem;line-height:3.5rem;margin-top:0;overflow:hidden;padding:0 5rem 0 3rem;position:relative;text-overflow:ellipsis;white-space:nowrap;width:100%\n}\n.is_show_testcase_title{border-bottom:1px solid #e0e0e0\n}\n.t-show-steps{background-color:#fff;min-height:20rem;position:relative\n}\n.t-show-steps h6{color:#8e24aa;font-weight:400;margin:0 0 0 40px;padding-top:1.5rem\n}\n.t-show-steps pre{margin:0 0 0 40px;padding-top:.7rem\n}\n.img-roll-more{-webkit-transform:rotate(90deg);height:32px;margin-right:-3rem;margin-top:.7rem;position:relative;transform:rotate(90deg);width:32px\n}\n.img-roll-more,.roll-operate{display:inline-block;float:right\n}\n.roll-operate{background-color:#fff;padding-left:3rem;position:absolute;right:5rem;visibility:hidden;z-index:100\n}\n.showRollOperate{visibility:visible\n}\n.roll-operate img{display:inline;height:20px;margin-left:1rem;position:relative;width:20px\n}\n.t-testcase-title:hover .roll-operate{visibility:visible\n}\n.t_p1{background-color:rgba(245,107,107,.1);color:#f56c6c\n}\n.t_p1,.t_p2{border:1px solid #eee;border-radius:6px;font-weight:300;margin-left:-1.5rem;margin-right:1rem;padding:3px 10px\n}\n.t_p2{background-color:#e3f2fd;color:#1e88e5\n}\n.t_p3{background-color:#f1f8e9;border:1px solid #eee;border-radius:6px;color:#33691e;font-weight:300;margin-left:-1.5rem;margin-right:1rem;padding:3px 10px\n}\n.annex{position:relative\n}\n.annex:hover>img{-moz-opacity:.3;filter:alpha(Opacity=30);opacity:.3\n}\n.annex>img{border-radius:5px;height:148px;width:148px\n}\n.annex_delete{position:relative;right:90px;visibility:hidden;z-index:100\n}\n.h-annex{margin-top:-150px\n}\n.annex_delete>img{height:28px;width:28px\n}\n.annex:hover .annex_delete{visibility:visible\n}\n.img_scale{-webkit-transform:scale(3);position:relative;transform:scale(3);z-index:100\n}\n.review-area{margin-top:2rem\n}\n.review-box{border-top:1px solid #eee;font-size:.98rem;margin-top:2rem;min-height:5rem;outline:none;overflow-x:hidden;overflow-y:auto;padding:10px 18px 0;word-wrap:break-word\n}\n.review-area>.review-control{border:none;border-top:1px solid #eee;bottom:0;display:block;font-size:.9rem;line-height:1.6rem;min-height:5rem;outline:none;overflow:hidden;overflow-y:hidden;padding:.5rem 1rem 0;resize:none;right:0;width:100%\n}\n.custom-file{border:1px dashed #b2b2b2;display:inline-block;margin-bottom:0;min-height:5rem;position:relative;width:100%\n}\n.custom-file-input{line-height:5rem;margin:0;opacity:0;position:relative;width:100%;z-index:2\n}\n.custom-file-label{background-color:#fff;border:none;color:#757575;height:calc(2.25rem + 2px);line-height:1.5;margin-top:1.35rem;padding:.375rem .75rem;position:absolute;text-align:center;z-index:1\n}\n.custom-file-label:after{display:none\n}\n.file-upload-icon{height:36px;width:36px\n}\n.log-text-time,.log-text-user{font-size:.94rem\n}\n.log-text-user{color:#2973b7\n}\n.log-text-remark{background:#f5f5f5;border-radius:5px;color:#383838;margin-top:.7rem;padding:1rem;text-align:left!important;white-space:pre-line\n}\n.bug-query-selected{color:#9c27b0\n}\n.bug-query-selected-byme{color:#3f51b5\n}",""])},928:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"page-testcase-add"}},[i("div",{staticClass:"container-fluid",attrs:{id:"page-testcase-add-title"}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col text-center page-bug-add-title"},[i("img",{attrs:{src:a(453)},on:{click:function(e){t.$router.go(-1)}}}),t._v(" "),i("h3",[t._v("编写测试用例")]),t._v(" "),i("div",{staticClass:"dropdown-divider"})])])]),t._v(" "),i("div",{staticClass:"container mt-5 pg-test-edit",attrs:{id:"page-testcase-add-input"}},[i("div",{staticClass:"row",staticStyle:{margin:"0"}},[i("div",{staticClass:"col-xl-10 col-lg-10 col-md-12 col-sm-12 col-12 offset-xl-1 offset-lg-1"},[i("form",{attrs:{sytle:"background-color:#fff;"}},[i("div",{staticClass:"form-group row"},[t._m(0),t._v(" "),i("el-select",{staticClass:"col-sm-3 col-5 px-0",attrs:{placeholder:"请选择产品"},model:{value:t.CaseData.product_code,callback:function(e){t.$set(t.CaseData,"product_code",e)},expression:"CaseData.product_code"}},t._l(t.product_list,function(t){return i("el-option",{key:t.label,attrs:{label:t.value,value:t.value}})})),t._v(" "),i("el-cascader",{staticClass:"col-sm-3 col-5 ml-3 px-0",attrs:{placeholder:"选择模块",options:t.modules_list,filterable:""},model:{value:t.CaseData.module_id,callback:function(e){t.$set(t.CaseData,"module_id",e)},expression:"CaseData.module_id"}})],1),t._v(" "),i("div",{staticClass:"form-group row"},[t._m(1),t._v(" "),i("el-select",{staticClass:"col-sm-3 col-5 px-0 e-select-support",attrs:{placeholder:"用例类型"},model:{value:t.CaseData.category,callback:function(e){t.$set(t.CaseData,"category",e)},expression:"CaseData.category"}},[i("el-option",{attrs:{value:"Functional",label:"功能"}}),t._v(" "),i("el-option",{attrs:{value:"compatibility",label:"兼容"}}),t._v(" "),i("el-option",{attrs:{value:"UI",label:"UI"}},[t._v("UI")]),t._v(" "),i("el-option",{attrs:{value:"performance",label:"性能"}}),t._v(" "),i("el-option",{attrs:{value:"other",label:"其它"}})],1),t._v(" "),i("el-select",{staticClass:"col-sm-3 col-5 ml-3 px-0",attrs:{placeholder:"优先级"},model:{value:t.CaseData.priority,callback:function(e){t.$set(t.CaseData,"priority",e)},expression:"CaseData.priority"}},[i("el-option",{attrs:{value:"P1"}},[t._v("P1")]),t._v(" "),i("el-option",{attrs:{value:"P2"}},[t._v("P2")]),t._v(" "),i("el-option",{attrs:{value:"P3"}},[t._v("P3")])],1)],1),t._v(" "),i("div",{attrs:{id:"t-testcase-functional"}},[i("div",{staticClass:"form-group row"},[t._m(2),t._v(" "),i("el-input",{staticClass:"px-0 col-sm-9",attrs:{type:"text",id:"inputTitle",placeholder:"用例标题...",maxlength:"50",required:""},model:{value:t.CaseData.title,callback:function(e){t.$set(t.CaseData,"title","string"==typeof e?e.trim():e)},expression:"CaseData.title"}})],1),t._v(" "),i("div",{staticClass:"form-group row"},[t._m(3),t._v(" "),i("el-input",{staticClass:"col-sm-9 px-0",attrs:{type:"textarea",id:"inputPrecondition",maxlength:"500",autosize:{minRows:2},placeholder:"测试用例执行前置条件..."},model:{value:t.CaseData.precondition,callback:function(e){t.$set(t.CaseData,"precondition","string"==typeof e?e.trim():e)},expression:"CaseData.precondition"}})],1),t._v(" "),i("div",{staticClass:"form-group row"},[t._m(4),t._v(" "),i("el-input",{staticClass:"col-sm-9 px-0",attrs:{type:"textarea",id:"inputSteps",maxlength:"1000",autosize:{minRows:7},placeholder:"测试步骤...",required:""},model:{value:t.CaseData.steps,callback:function(e){t.$set(t.CaseData,"steps","string"==typeof e?e.trim():e)},expression:"CaseData.steps"}})],1),t._v(" "),i("div",{staticClass:"form-group row"},[t._m(5),t._v(" "),i("el-input",{staticClass:"col-sm-9 px-0",attrs:{type:"textarea",id:"inputData",maxlength:"500",autosize:{minRows:3},placeholder:"需要使用的测试数据..."},model:{value:t.CaseData.DataInput,callback:function(e){t.$set(t.CaseData,"DataInput","string"==typeof e?e.trim():e)},expression:"CaseData.DataInput"}})],1),t._v(" "),i("div",{staticClass:"form-group row"},[t._m(6),t._v(" "),i("el-input",{staticClass:"col-sm-9 px-0",attrs:{type:"textarea",id:"inputOutput",maxlength:"500",autosize:{minRows:4},placeholder:"测试用例预期结果...",required:""},model:{value:t.CaseData.ExpectedResult,callback:function(e){t.$set(t.CaseData,"ExpectedResult","string"==typeof e?e.trim():e)},expression:"CaseData.ExpectedResult"}})],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isRemarkDisable,expression:"isRemarkDisable"}],staticClass:"form-group row"},[t._m(7),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.CaseData.remark,expression:"CaseData.remark",modifiers:{trim:!0}}],staticClass:"textarea-control col-sm-9",attrs:{type:"text",rows:"4",id:"inputRemarks",placeholder:"请输入备注...",maxlength:"1000",required:""},domProps:{value:t.CaseData.remark},on:{input:function(e){e.target.composing||t.$set(t.CaseData,"remark",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("div",{staticClass:"d-flex justify-content-center my-5"},[i("button",{staticClass:"btn btn-accessories",attrs:{type:"button"},on:{click:t.isShowRemark}},[t._v("添加备注")]),t._v(" "),i("button",{staticClass:"btn btn-submit mx-5 px-3",attrs:{type:"button",disabled:t.isButtonDisabled,value:"only-once-commit"},on:{click:t.addTest}},[t._v("保存提交")]),t._v(" "),i("button",{staticClass:"btn btn-accessories",attrs:{type:"button",disabled:t.isButtonDisabled,value:"continue-commit"},on:{click:function(e){t.addTest(e)}}},[t._v("继续添加")]),t._v(" "),i("button",{staticClass:"btn btn-transparent",attrs:{type:"button"},on:{click:function(e){t.$router.go(-1)}}},[t._v("返回")])])])])])])])])};i._withStripped=!0;a(41);var n=a(4),o=a.n(n),s={head:function(){return{title:"HDesk - 编写测试用例"}},data:function(){return{product_list:[],modules_list:[],msg:"",isButtonDisabled:!1,isRemarkDisable:!1,CaseData:{product_code:null,title:"",precondition:"",DataInput:"",ExpectedResult:"",steps:"1.\n2.\n",remark:"",category:"Functional",priority:"P1",module_id:[]}}},computed:{selected_product:function(){return this.CaseData.product_code?this.CaseData.product_code:null}},watch:{selected_product:function(t,e){this.getModule(),this.$router.replace({path:"/app/qa/testcase/add",query:{product_code:this.CaseData.product_code}})},product_list:function(t,e){this.product_list.length>0&!this.CaseData.product_code&&(this.CaseData.product_code=this.product_list[0].value)}},created:function(){this.getProductList(),this.$route.query.product_code&&(this.CaseData.product_code=this.$route.query.product_code)},methods:{getProductList:function(){var t=this;o.a.get("/api/pm/new_product_release").then(function(e){2e4===e.data.status&&(t.product_list=e.data.data)})},getModule:function(){var t=this;o.a.get("/api/pm/get_module?product_code="+this.CaseData.product_code).then(function(e){2e4===e.data.status?t.modules_list=e.data.data:t.Msg=e.data.msg})},isShowRemark:function(){this.isRemarkDisable?(this.isRemarkDisable=!1,this.CaseData.remark=""):this.isRemarkDisable=!0},addTest:function(t){var e=this,a=e.CaseData.title,i=e.CaseData.DataInput,n=e.CaseData.ExpectedResult,s=e.CaseData.steps;a.length<5|a.length>50?this.$notify.error({title:"错误",message:"标题有效长度为5到50位"}):i.trim().length>500?this.$notify.error({title:"错误",message:"测试输入最多为500个字符"}):n.trim().length<2|n.trim().length>500?this.$notify.error({title:"错误",message:"预期结果的有效长度为2到200位，且不能为空"}):s.trim().length<10|s.trim().length>1e3?this.$notify.error({title:"错误",message:"操作步骤的有效长度为10到500"}):this.CaseData.remark.length>1e3?this.$notify.error({title:"错误",message:"备注输入太长了,有效最大长度为1000"}):o()({method:"post",url:"/api/qa/testcase/add",data:JSON.stringify(e.CaseData),transformRequest:[function(t){return e.isButtonDisabled=!0,t}]}).then(function(a){2e4===a.data.status?(e.isButtonDisabled=!1,"only-once-commit"===t.target.value&&e.$router.go(-1),"continue-commit"===t.target.value&&($(document).scrollTop(0),e.CaseData.title="",e.CaseData.precondition="",e.CaseData.DataInput="",e.CaseData.remark="",e.CaseData.ExpectedResult="",e.CaseData.steps="1.\n2.\n")):(e.isButtonDisabled=!1,e.$notify.error({title:"错误",message:a.data.msg}))})}}},r=(a(917),a(10)),l=Object(r.a)(s,i,[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"col-sm-2 testcase-label",attrs:{for:"CaseInfo"}},[this._v("产品与模块"),e("span",{staticClass:"text-red"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"col-sm-2 testcase-label",attrs:{for:"CaseInfo"}},[this._v("用例属性"),e("span",{staticClass:"text-red"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"col-sm-2 testcase-label",attrs:{for:"CaseTitle"}},[this._v("用例标题"),e("span",{staticClass:"text-red"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"col-sm-2 testcase-label",attrs:{for:"CasePrecondition"}},[this._v("\n                执行前置条件"),e("p",{staticClass:"label-desc"},[this._v("(选填)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"col-sm-2 testcase-label",attrs:{for:"CaseSteps"}},[this._v("\n                操作步骤"),e("span",{staticClass:"text-red"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"col-sm-2 testcase-label",attrs:{for:"CaseInput"}},[this._v("\n                测试数据"),e("p",{staticClass:"label-desc"},[this._v("(选填)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"col-sm-2 testcase-label",attrs:{for:"CaseOutput"}},[this._v("预期结果"),e("span",{staticClass:"text-red"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"col-sm-2 testcase-label",attrs:{for:"CaseRemarks"}},[this._v("\n                备注"),e("p",{staticClass:"label-desc"},[this._v("(选填)")])])}],!1,null,null,null);l.options.__file="add.vue";e.default=l.exports}}]);