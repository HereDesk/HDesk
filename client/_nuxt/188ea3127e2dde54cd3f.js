(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{307:function(e,t,a){"use strict";a(40),a(41);t.a={txt_deal_with:function(e){return e.replace(/(((https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)/gi,function(e){return'<a href="'+e+'" target="_blank">'+e+"</a>"})},getWeek:function(e){return e?new Date(e).getDay():""},date:function(e,t){if(!e)return"";var a=new Date(e),s=a.getFullYear(),l=a.getMonth()+1,n=a.getDate(),o=a.getHours(),r=a.getMinutes(),i=a.getSeconds(),u=function(e){return/^\d$/.test(e)?"0"+e:e};return t&&1!=t?2==t?u(l)+"/"+u(n)+" "+u(o)+":"+u(r):3==t?s+"-"+u(l)+"-"+u(n):4==t?u(o)+":"+u(r)+":"+u(i):5==t?u(s)+"/"+u(l)+"/"+u(n):void 0:s+"-"+u(l)+"-"+u(n)+" "+u(o)+":"+u(r)+":"+u(i)},bugStatusName:function(e){var t,a=[{code:"all",name:"全部"},{code:"New",name:"新建未分配"},{code:"Open",name:"待解决"},{code:"Reopen",name:"重新打开"},{code:"Hang-up",name:"挂起延期"},{code:"Fixed",name:"已解决"},{code:"Closed",name:"已关闭"}];for(t in a)if(a[t].code==e)return a[t].name},getOperatorsName:function(e){var t,a=[{value:"=",name:"="},{value:"!=",name:"!="},{value:">=",name:">="},{value:"<=",name:"<="},{value:">",name:">"},{value:"<",name:"<"},{value:"and",name:"and"},{value:"or",name:"or"},{value:"range",name:"范围"}];for(t in a)if(a[t].value==e)return a[t].name},getSearchTypeName:function(e){var t,a=[{value:"ID",name:"缺陷ID"},{value:"title",name:"缺陷标题"},{value:"priority",name:"优先级"},{value:"severity",name:"严重程度"},{value:"bug_type",name:"缺陷类型"},{value:"creator_user",name:"创建者"},{value:"closed_user",name:"关闭者"},{value:"fixed_user",name:"解决者"},{value:"assignedTo_user",name:"指派谁"},{value:"create_time",name:"创建日期"},{value:"closed_time",name:"关闭日期"},{value:"fixed_time",name:"解决日期"}];for(t in a)if(a[t].value==e)return a[t].name},QuickQperationName:function(e){var t,a=[{value:"no",name:"无"},{value:"WaitPending",name:"待我处理"},{value:"AssignedByMe",name:"指派给我"},{value:"ResolvedByMe",name:"我解决的"},{value:"ClosedByMe",name:"我关闭的"},{value:"CreatedByMe",name:"我创建的"},{value:"notClosed",name:"未关闭的"},{value:"NotResolved",name:"未解决的"},{value:"HighPriority",name:"高优先级"}];for(t in a)if(a[t].value==e)return a[t].name},flowdesc:function(e){var t,a=[{status:-1,name:"不涉及此项"},{status:0,name:"未开始"},{status:1,name:"设计中"},{status:2,name:"开发中"},{status:3,name:"开发完成"},{status:4,name:"待调试"},{status:5,name:"调试中"},{status:6,name:"调试"},{status:7,name:"进入测试"},{status:8,name:"测试中"},{status:9,name:"存在Bug"},{status:10,name:"修复Bug中"},{status:11,name:"回归Bug"},{status:12,name:"测试通过"},{status:13,name:"已上线"}];for(t in a)if(a[t].status==e)return a[t].name}}},328:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAh1BMVEUAAAC/v7/FxcW+vr6+vr6/v7+/v7/AwMC+vr6/v7+/v7+/v7/AwMDAwMC/v7+/v7+/v7+/v7/CwsK+vr6/v7+/v7/AwMDBwcHBwcG/v7/Dw8O+vr6/v7+/v7+/v7+/v7++vr6/v7+/v7/AwMDBwcHDw8O+vr6/v7+/v7/AwMC/v7/AwMC/v7+KSxGBAAAALHRSTlMA5wXvx/jgHvXAuUpDFNZ+cGMa3c1ONSomIw3866mQi4RcUzIQCZ+Vd1g+OKIaDxgAAAGlSURBVFjD7dfLcrJAEIbh5ih4DKIY0Xg2Jvre//X95cKCkrEhfy+yybOkYJgZeqo/5M9PZEn/LBYpzEZicI0gXspLo2zbT3c9ZYRiDd7LG74D7lYXZYReDvlJnHY8bJQRph6Ezp0cUvlWRnhfw4c4hFQ8URwjeHNMjbqjKPawuqkrgINoLhD78mRA3Vw0/tixiAV1S1ENISjlSUxlJi36sJMnc3UFzfkGvl5I7VPYNy5uV9wlmbQ7QOiohUna32RT6cKDd7HY3r+kxRBSsfATViex+ICBWHxZN2EAn2IxhVBMIjwx8UjEZAxiEoKtEGYwsi7hlzcxwbMW0sx2nq2l/AZfv3ucA2MZFM7D2JtPJkPpZAKTRnQIucsP0kHczACDRAsozUY4fn5/xEN07NLasuZn6d6di2ZzLaNGPlCEzS28UjdoDxhnNeIcfh5xCuquovl0hSw/oBL5LTGPm6tVVS6iuEWwdf8MPHjaKVkGMHbOsHyE3XyhPD+KXwd+f58C8easxf0Y1kq2KYuTHu88WC/kv/UC8JaWvzbIe2JQpv2R/HH4B3NjTRQQIuPnAAAAAElFTkSuQmCC"},946:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container mt-3"},[e._m(0),e._v(" "),s("div",{staticClass:"row mt-3 mb-5 table_data"},[s("div",{staticClass:"col-xl-12 col-lg-12 col-md-12"},[s("el-table",{attrs:{data:e.tableData,"default-sort":{prop:"date",order:"descending"}}},[s("el-table-column",{attrs:{label:"产品",prop:"product_code"}}),e._v(" "),s("el-table-column",{attrs:{label:"版本",prop:"version"}}),e._v(" "),s("el-table-column",{attrs:{label:"创建者",prop:"user"}}),e._v(" "),s("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(e._f("date")(t.row.create_time)))])]}}])})],1)],1)]),e._v(" "),e.controlNull?s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 text-center mt-5"},[s("img",{staticClass:"null-icon",attrs:{src:a(328)}}),e._v(" "),s("p",{staticClass:"no-hint"},[e._v(e._s(e.msg))])])]):e._e(),e._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"modal-create-release",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[e._m(1),e._v(" "),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"form-group row col-md-auto"},[s("label",{staticClass:"mx-5",attrs:{for:"pg-product-name"}},[e._v("选择产品")]),e._v(" "),s("select",{staticClass:"form-control mx-5 my-1",staticStyle:{border:"1px solid #9E9E9E","background-color":"#f5f5f5"}},[s("option",[e._v(e._s(e.product_code))])])]),e._v(" "),s("div",{staticClass:"form-group row col-md-auto"},[s("label",{staticClass:"mx-5",attrs:{for:"pg-product-name"}},[e._v("版本")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.ReleaseData.release,expression:"ReleaseData.release"}],staticClass:"form-control input-lg mx-5 my-1",attrs:{type:"text",id:"pg-product-name",placeholder:"输入（不超20个字）",maxlength:"20",required:""},domProps:{value:e.ReleaseData.release},on:{input:function(t){t.target.composing||e.$set(e.ReleaseData,"release",t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-cancel",attrs:{type:"button","data-dismiss":"modal"}},[e._v("关闭")]),e._v(" "),s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:e.createRelease}},[e._v("提交")])])])])])])};s._withStripped=!0;var l=a(4),n=a.n(l),o={head:function(){return{title:"HDesk - 版本管理"}},layout:"head",filters:{date:a(307).a.date},data:function(){return{product_code:"",release_list:"",tableData:[],msg:"",controlNull:!1,ReleaseData:{release:"",product_code:""}}},watch:{tableData:function(e,t){this.tableData.length>0?this.controlNull=!1:(this.msg=this.product_code+"产品下暂时还没有版本哦",this.controlNull=!0)}},created:function(){this.product_code=this.$route.query.product_code,this.$route.query.product_code?this.getRelease():this.$router.push("/basic/product")},methods:{getRelease:function(){var e=this;n.a.get("/api/pm/release/list?product_code="+e.product_code).then(function(t){2e4===t.data.status?e.tableData=t.data.data:e.msg=t.data.msg})},createRelease:function(e){var t=this.ReleaseData.release;if(this.ReleaseData.product_code=this.product_code,t.length>20|0===t.length)this.$notify.error({title:"提交失败",message:"版本号的有效长度为0-8"});else{var a=this;n()({method:"post",url:"/api/pm/release/create",data:JSON.stringify(this.ReleaseData)}).then(function(e){2e4===e.data.status&&($("#modal-create-release").modal("hide"),a.$notify.success({title:"成功",message:e.data.msg}),a.getRelease()),2e4!==e.data.status&&a.$notify.error({title:"错误",message:e.data.msg})})}}}},r=a(10),i=Object(r.a)(o,s,[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row mt-5"},[t("div",{staticClass:"col-auto mr-auto"},[t("h1",{staticClass:"navbar-brand"},[this._v("版本管理")])]),this._v(" "),t("div",{staticClass:"col-auto"},[t("button",{staticClass:"btn btn-create",attrs:{type:"button",id:"addRelease","data-toggle":"modal","data-target":"#modal-create-release"}},[this._v("\n          增加版本  \n      ")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-header"},[t("h5",{staticClass:"modal-title"},[this._v("创建版本号")])])}],!1,null,null,null);i.options.__file="release.vue";t.default=i.exports}}]);