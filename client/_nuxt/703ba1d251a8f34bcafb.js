(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{307:function(t,e,a){"use strict";a(40),a(41);e.a={txt_deal_with:function(t){return t.replace(/(((https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)/gi,function(t){return'<a href="'+t+'" target="_blank">'+t+"</a>"})},getWeek:function(t){return t?new Date(t).getDay():""},date:function(t,e){if(!t)return"";var a=new Date(t),o=a.getFullYear(),n=a.getMonth()+1,s=a.getDate(),r=a.getHours(),i=a.getMinutes(),l=a.getSeconds(),c=function(t){return/^\d$/.test(t)?"0"+t:t};return e&&1!=e?2==e?c(n)+"/"+c(s)+" "+c(r)+":"+c(i):3==e?o+"-"+c(n)+"-"+c(s):4==e?c(r)+":"+c(i)+":"+c(l):5==e?c(o)+"/"+c(n)+"/"+c(s):void 0:o+"-"+c(n)+"-"+c(s)+" "+c(r)+":"+c(i)+":"+c(l)},bugStatusName:function(t){var e,a=[{code:"all",name:"全部"},{code:"New",name:"新建未分配"},{code:"Open",name:"待解决"},{code:"Reopen",name:"重新打开"},{code:"Hang-up",name:"挂起延期"},{code:"Fixed",name:"已解决"},{code:"Closed",name:"已关闭"}];for(e in a)if(a[e].code==t)return a[e].name},getOperatorsName:function(t){var e,a=[{value:"=",name:"="},{value:"!=",name:"!="},{value:">=",name:">="},{value:"<=",name:"<="},{value:">",name:">"},{value:"<",name:"<"},{value:"and",name:"and"},{value:"or",name:"or"},{value:"range",name:"范围"}];for(e in a)if(a[e].value==t)return a[e].name},getSearchTypeName:function(t){var e,a=[{value:"ID",name:"缺陷ID"},{value:"title",name:"缺陷标题"},{value:"priority",name:"优先级"},{value:"severity",name:"严重程度"},{value:"bug_type",name:"缺陷类型"},{value:"creator_user",name:"创建者"},{value:"closed_user",name:"关闭者"},{value:"fixed_user",name:"解决者"},{value:"assignedTo_user",name:"指派谁"},{value:"create_time",name:"创建日期"},{value:"closed_time",name:"关闭日期"},{value:"fixed_time",name:"解决日期"}];for(e in a)if(a[e].value==t)return a[e].name},QuickQperationName:function(t){var e,a=[{value:"no",name:"无"},{value:"WaitPending",name:"待我处理"},{value:"AssignedByMe",name:"指派给我"},{value:"ResolvedByMe",name:"我解决的"},{value:"ClosedByMe",name:"我关闭的"},{value:"CreatedByMe",name:"我创建的"},{value:"notClosed",name:"未关闭的"},{value:"NotResolved",name:"未解决的"},{value:"HighPriority",name:"高优先级"}];for(e in a)if(a[e].value==t)return a[e].name},flowdesc:function(t){var e,a=[{status:-1,name:"不涉及此项"},{status:0,name:"未开始"},{status:1,name:"设计中"},{status:2,name:"开发中"},{status:3,name:"开发完成"},{status:4,name:"待调试"},{status:5,name:"调试中"},{status:6,name:"调试"},{status:7,name:"进入测试"},{status:8,name:"测试中"},{status:9,name:"存在Bug"},{status:10,name:"修复Bug中"},{status:11,name:"回归Bug"},{status:12,name:"测试通过"},{status:13,name:"已上线"}];for(e in a)if(a[e].status==t)return a[e].name}}},328:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAh1BMVEUAAAC/v7/FxcW+vr6+vr6/v7+/v7/AwMC+vr6/v7+/v7+/v7/AwMDAwMC/v7+/v7+/v7+/v7/CwsK+vr6/v7+/v7/AwMDBwcHBwcG/v7/Dw8O+vr6/v7+/v7+/v7+/v7++vr6/v7+/v7/AwMDBwcHDw8O+vr6/v7+/v7/AwMC/v7/AwMC/v7+KSxGBAAAALHRSTlMA5wXvx/jgHvXAuUpDFNZ+cGMa3c1ONSomIw3866mQi4RcUzIQCZ+Vd1g+OKIaDxgAAAGlSURBVFjD7dfLcrJAEIbh5ih4DKIY0Xg2Jvre//X95cKCkrEhfy+yybOkYJgZeqo/5M9PZEn/LBYpzEZicI0gXspLo2zbT3c9ZYRiDd7LG74D7lYXZYReDvlJnHY8bJQRph6Ezp0cUvlWRnhfw4c4hFQ8URwjeHNMjbqjKPawuqkrgINoLhD78mRA3Vw0/tixiAV1S1ENISjlSUxlJi36sJMnc3UFzfkGvl5I7VPYNy5uV9wlmbQ7QOiohUna32RT6cKDd7HY3r+kxRBSsfATViex+ICBWHxZN2EAn2IxhVBMIjwx8UjEZAxiEoKtEGYwsi7hlzcxwbMW0sx2nq2l/AZfv3ucA2MZFM7D2JtPJkPpZAKTRnQIucsP0kHczACDRAsozUY4fn5/xEN07NLasuZn6d6di2ZzLaNGPlCEzS28UjdoDxhnNeIcfh5xCuquovl0hSw/oBL5LTGPm6tVVS6iuEWwdf8MPHjaKVkGMHbOsHyE3XyhPD+KXwd+f58C8easxf0Y1kq2KYuTHu88WC/kv/UC8JaWvzbIe2JQpv2R/HH4B3NjTRQQIuPnAAAAAElFTkSuQmCC"},438:function(t,e,a){var o=a(822);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,a(20).default)("d990d910",o,!1,{sourceMap:!1})},439:function(t,e,a){var o=a(824);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,a(20).default)("6bcc8853",o,!1,{sourceMap:!1})},821:function(t,e,a){"use strict";var o=a(438);a.n(o).a},822:function(t,e,a){(t.exports=a(19)(!1)).push([t.i,'\n.tooltip-mask{background-color:rgba(0,0,0,.5);display:table;height:100%;left:0;position:fixed;top:0;transition:opacity .3s ease;width:100%;z-index:9998\n}\n.tooltip-wrapper{display:table-cell;vertical-align:middle\n}\n.tooltip-container{background-color:#fff;border-radius:2px;box-shadow:0 2px 8px rgba(0,0,0,.33);font-family:Helvetica,Arial,sans-serif;margin:0 40%;padding:10px;transition:all .3s ease\n}\n@media (max-width:576px){\n.tooltip-container{background-color:#fff;border-radius:2px;box-shadow:0 2px 8px rgba(0,0,0,.33);font-family:Helvetica,Arial,sans-serif;margin:0 10%;padding:20px 30px;transition:all .3s ease\n}\n}\n.tooltip-body{min-height:6rem\n}\n.tooltip-header{border-bottom:0 solid #fff\n}\n.tooltip-header h6{color:#000;margin-top:0\n}\n.tooltip-footer{background-color:#424242!important;border-top:1px solid #fff;color:#8d6e63;display:block;font-size:.9rem;text-align:center\n}\n.close-text{color:#fff\n}\n.tooltip-leave-active{opacity:0\n}\n.tooltip-enter .tooltip-container,.tooltip-leave-active .tooltip-container{-webkit-transform:scale(1.1);transform:scale(1.1)\n}\n.x{border-color:#fff;border-radius:50px;display:block;float:right;height:25px;left:0;position:relative;top:0;transition:-webkit-transform .25s ease-in-out;transition:transform .25s ease-in-out;transition:transform .25s ease-in-out,-webkit-transform .25s ease-in-out;width:25px\n}\n.x:hover{-webkit-transform:rotate(180deg);transform:rotate(180deg)\n}\n.x:before{-webkit-transform:rotate(45deg);-webkit-transform-origin:center;transform:rotate(45deg);transform-origin:center\n}\n.x:after,.x:before{border-top:1px solid rgba(0,0,0,.5);bottom:0;content:"";display:block;height:0;left:0;margin:auto;position:absolute;right:0;top:0;width:25px\n}\n.x:after{-webkit-transform:rotate(-45deg);-webkit-transform-origin:center;transform:rotate(-45deg);transform-origin:center\n}',""])},823:function(t,e,a){"use strict";var o=a(439);a.n(o).a},824:function(t,e,a){(t.exports=a(19)(!1)).push([t.i,"",""])},925:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container mt-3"},[o("div",{staticClass:"row mt-5"},[t._m(0),t._v(" "),o("div",{staticClass:"col-auto"},[o("button",{staticClass:"btn btn-create",attrs:{type:"button",id:"addRelease","data-toggle":"modal","data-target":"#P-Join-Members"},on:{click:function(e){t.getAllUser()}}},[t._v("\n        + 增加成员\n      ")])])]),t._v(" "),o("div",{staticClass:"row mt-3 mb-5 table_data"},[o("div",{staticClass:"col-xl-12 col-lg-12 col-md-12"},[o("el-table",{attrs:{data:t.tableData,"default-sort":{prop:"date",order:"descending"}}},[o("el-table-column",{attrs:{label:"真实姓名",prop:"realname"}}),t._v(" "),o("el-table-column",{attrs:{label:"群组",prop:"group"}}),t._v(" "),o("el-table-column",{attrs:{label:"岗位/职位",prop:"position"}}),t._v(" "),o("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?o("span",{staticClass:"text-deadly"},[t._v("禁用")]):t._e(),t._v(" "),0===e.row.status?o("span",[t._v("启用")]):t._e()]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"加入时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(t._f("date")(e.row.join_time)))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.status?o("span",{on:{click:function(a){t.banned(e.row,a)}}},[o("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button",value:"1"}},[t._v("禁用")])]):t._e(),t._v(" "),1===e.row.status?o("span",{on:{click:function(a){t.reJoin(e.row,a)}}},[o("button",{staticClass:"btn btn-outline-success btn-sm",attrs:{type:"button",value:"0"}},[t._v("激活")])]):t._e()]}}])})],1)],1)]),t._v(" "),t.controlNull?o("div",{staticClass:"row"},[o("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 text-center mt-5"},[o("img",{staticClass:"null-icon",attrs:{src:a(328)}}),t._v(" "),o("p",{staticClass:"no-hint"},[t._v(t._s(t.msg))])])]):t._e(),t._v(" "),o("div",{staticClass:"modal fade",attrs:{id:"P-Join-Members",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[o("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[o("div",{staticClass:"modal-content"},[t._m(1),t._v(" "),o("div",{staticClass:"modal-body"},[o("div",{staticClass:"form-group row col-md-auto"},[o("label",{staticClass:"mx-5",attrs:{for:"pg-product-name"}},[t._v("产品")]),t._v(" "),o("select",{staticClass:"form-control mx-5 my-1",staticStyle:{border:"1px solid #9E9E9E","background-color":"#f5f5f5"}},[o("option",[t._v(t._s(t.product_code))])])]),t._v(" "),o("div",{staticClass:"form-group row col-md-auto",on:{change:function(e){t.selectMember(e)}}},[o("label",{staticClass:"mx-5",attrs:{for:"pg-product-name"}},[t._v("选择人员")]),t._v(" "),o("select",{staticClass:"form-control mx-5 my-1",staticStyle:{border:"1px solid #9E9E9E","background-color":"#f5f5f5"}},[o("option",{attrs:{value:""}},[t._v("请选择")]),t._v(" "),t._l(t.AllUser,function(e){return o("option",{key:e.id,domProps:{value:e.user_id}},[t._v(t._s(e.realname))])})],2)]),t._v(" "),t.errorMsg?o("span",{staticClass:"ml-5 ms-msg"},[t._v("错误提示："+t._s(t.errorMsg))]):t._e()]),t._v(" "),o("div",{staticClass:"modal-footer"},[o("button",{staticClass:"btn btn-cancel",attrs:{type:"button","data-dismiss":"modal"}},[t._v("关闭")]),t._v(" "),o("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:t.JoinProduct}},[t._v("提交")])])])])])])};o._withStripped=!0;var n=a(4),s=a.n(n),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("transition",{attrs:{name:"tooltip",duration:1e4}},[a("div",{staticClass:"tooltip-mask"},[a("div",{staticClass:"tooltip-wrapper"},[a("div",{staticClass:"tooltip-container p-0"},[a("div",{staticClass:"tooltip-header"},[a("h6",[t._v("提示：")])]),t._v(" "),a("div",{staticClass:"tooltip-body"},[t._t("body"),t._v(" "),t._t("action")],2),t._v(" "),a("div",{staticClass:"tooltip-footer"},[t._t("footer",[a("span",{staticClass:"close-text",on:{click:function(e){t.$emit("close")}}},[t._v("我知道了")])])],2)])])])])],1)};r._withStripped=!0;a(821);var i=a(10),l=Object(i.a)({},r,[],!1,null,null,null);l.options.__file="tooltip.vue";var c=l.exports,u=a(307),d=(a(105),{head:function(){return{title:"HDesk - 成员管理"}},layout:"head",components:{tooltip:c},filters:{date:u.a.date},data:function(){return{product_code:"",release_list:"",tableData:[],AllUser:[],msg:"",errorMsg:"",controlNull:!1,ProductMemberData:{user_id:"",product_code:""},bannedData:{user_id:"",product_code:""}}},watch:{tableData:function(t,e){this.tableData.length>0?this.controlNull=!1:(this.msg=this.product_code+"产品下暂时还没有成员哦",this.controlNull=!0)}},created:function(){this.product_code=this.$route.query.product_code,this.ProductMemberData.product_code=this.$route.query.product_code,this.bannedData.product_code=this.$route.query.product_code,this.$route.query.product_code?this.getProductMember():this.$router.push("/app/products")},methods:{getProductMember:function(){var t=this;s.a.get("/api/pm/member/list?product_code="+t.product_code).then(function(e){2e4===e.data.status?t.tableData=e.data.data:(t.msg=e.data.msg,t.controlNull=!0)})},getAllUser:function(){var t=this;s.a.get("/api/user/user_list").then(function(e){2e4===e.data.status?t.AllUser=e.data.data:t.$notify.error({title:"获取失败",message:e.data.msg})})},selectMember:function(t){this.ProductMemberData.user_id=t.target.value},JoinProduct:function(t){if(""!==this.ProductMemberData.user_id){var e=this;s()({method:"post",url:"/api/pm/member/join",data:JSON.stringify(this.ProductMemberData)}).then(function(t){2e4===t.data.status&&($("#P-Join-Members").modal("hide"),e.$notify.success({title:"加入成功",message:t.data.msg}),e.getProductMember()),2e4!==t.data.status&&e.$notify.error({title:"加入失败",message:t.data.msg})})}else this.$notify.error({title:"提交失败",message:"请选择用户"})},banned:function(t,e){var a=this;a.bannedData.user_id=t.user_id,s()({method:"post",url:"/api/pm/member/ban",data:JSON.stringify(a.bannedData)}).then(function(t){2e4===t.data.status?(a.$notify.success({title:"操作成功",message:t.data.msg}),a.getProductMember()):a.$notify.error({title:"错误",message:t.data.msg})})},reJoin:function(t,e){var a=this;a.bannedData.user_id=t.user_id,s()({method:"post",url:"/api/pm/member/rejoin",data:JSON.stringify(a.bannedData)}).then(function(t){2e4===t.data.status?(a.$notify.success({title:"操作成功",message:"此用户已重新激活"}),a.getProductMember()):a.$notify.error({title:"激活失败",message:t.data.msg})})}}}),m=(a(823),Object(i.a)(d,o,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-auto mr-auto"},[e("a",{staticClass:"navbar-brand"},[this._v("成员管理")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[this._v("增加人员")])])}],!1,null,"4ccc9de2",null));m.options.__file="members.vue";e.default=m.exports}}]);