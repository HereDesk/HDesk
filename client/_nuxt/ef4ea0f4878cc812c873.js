(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{457:function(e,t,a){var i=a(920);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a(20).default)("30285788",i,!1,{sourceMap:!1})},919:function(e,t,a){"use strict";var i=a(457);a.n(i).a},920:function(e,t,a){(e.exports=a(19)(!1)).push([e.i,"\n@media (min-width:768px){\n.mobile-action-bar{margin-right:2rem\n}\n}\n@media (max-width:575.98px){\n.mobile-action-bar{margin-left:1rem;margin-top:1rem!important\n}\n}\n@media (min-width:1200px){\n.bd-sidebar{flex:0 1 320px\n}\n}\n@media (min-width:768px){\n.bd-sidebar{border-right:1px solid rgba(0,0,0,.1);height:calc(100vh - 4rem);position:-webkit-sticky;position:sticky;top:4rem;z-index:1000\n}\n}\n.bd-sidebar{border-bottom:1px solid rgba(0,0,0,.1);order:0\n}\n.countdata-title{font-size:1.4rem;font-weight:500;margin-bottom:2rem;text-align:center\n}\n.countdata-num{color:#2b2b2b;font-size:2.5rem\n}\n.countdata-desc{color:#757575;font-size:.95rem;font-weight:300\n}\n.center-circle{background-color:#fff;border-radius:50%;height:6.6rem;line-height:6.6rem;width:6.6rem\n}\n.center-circle-success{border:.5rem solid red\n}\n.center-circle>.center-circle-text{position:relative;text-align:center\n}\n.satellite_info{color:#707070!important;font-size:.95rem!important\n}\n.satellite_info label{line-height:1.8rem;margin-right:1rem;min-width:5rem;text-align:left\n}\n.standline{background-color:#673ab7\n}\n.redline,.standline{float:left;height:1.1rem;width:3px\n}\n.redline{background-color:#f44336\n}\n.successline{background-color:#4caf50\n}\n.grayline,.successline{float:left;height:1.1rem;width:3px\n}\n.grayline{background-color:#b1bec6\n}\n.page-bug-add-title img{display:inline-block;float:right;height:33px;margin:1rem 1rem 1rem 0;width:33px\n}\n.page-bug-add-title h3{display:inline-block;font-weight:300!important;margin:1rem 0\n}\n.bug-label{text-align:right!important\n}\n@media (max-width:576px){\n.bug-label{text-align:left!important\n}\n}\n@media (max-width:768px){\n#bug-search,#TestCaseSearchInput{display:none\n}\n}\n@media (max-width:414px){\n#TestCaseTodayCount{display:none\n}\n}\n.hiddenSearch{display:none;visibility:hidden\n}\n.showSearch{display:flex;visibility:visible\n}\n.searchIcon img{height:24px;width:24px\n}\n.tableOpreate{display:none\n}\n.showBugOpreate{background-color:inherit;display:inline;margin-left:-7rem;margin-top:-1rem;position:absolute\n}\n.showBugOpreate button{background:inherit;border:none;display:inline-block;outline:none;z-index:9999\n}\n.showCaseOpreate{background-color:inherit;display:inline;margin-left:-5rem;margin-top:-1rem;position:absolute\n}\n.showCaseOpreate button{background:inherit;border:none;display:inline-block;margin-right:.5rem;outline:none;z-index:9999\n}\n.details-title{color:#333;font-size:1.35rem;font-weight:400!important;line-height:2rem\n}\n@media(max-width:576px){\n.bug-details-title{font-size:1.2rem\n}\n}\n.bug-details-minor-title{color:#333;font-size:1.1rem;font-weight:500\n}\n.details-block{background-color:#fafafa;border-radius:5px;color:#2b2b2b;font-size:.94rem;line-height:2rem;margin-top:1rem;padding:1rem\n}\n.details-block a{color:#2973b7!important\n}\n#testcase-modules .el-input__inner{height:2.5rem!important\n}\n.pg-modules{border-right:1px solid #eee\n}\n@media (max-width:576px){\n.pg-modules{display:none\n}\n}\n.t-manage-modules p,a{display:inline\n}\n.t-manage-modules a{float:right;margin-right:2rem\n}\n.t-manage-modules p:hover{color:#1e88e5\n}\n.t-modules-list{-ms-overflow-style:none;height:70vh;margin-bottom:5rem;opacity:1;overflow:-moz-scrollbars-none;overflow-x:hidden;overflow-y:scroll;position:relative;width:100%\n}\n.t-modules-list::-webkit-scrollbar{width:0\n}\n.pg-test-edit>textarea{background-color:#f5f5f5!important\n}\n.add-icon{clear:none;margin-right:5%;margin-top:-2rem;position:absolute;right:0;z-index:1\n}\n.test-case-category{margin:0;padding:0\n}\n.test-case-category li{display:inline;list-style:none;margin-right:1rem\n}\n.p-content-details{background-color:#fff;border-left:5px solid #43a047;margin-top:1.8rem;min-height:5rem;padding:1rem 1rem 1rem 1.5rem\n}\n.p-content-details pre{line-height:1.6rem;margin-left:.2rem\n}\n.p-content-tags{background-color:#f3e5f5;border-radius:10px;color:#6a1b9a;display:inline;font-size:.9rem;font-weight:400;padding:3px\n}\n.radio-inline{padding-left:1rem\n}\n.testcase_add label{font-size:1.1rem;margin:1rem 0 1rem .6rem\n}\n.testcase-category,.testcase-priority{background-color:#fff;border:1px solid #eee;line-height:1.5rem\n}\n.testcase-label{text-align:right!important\n}\n@media (max-width:576px){\n.testcase-label{text-align:left!important\n}\n}\n.paragraph-headings{margin:0 0 1.5rem\n}\n.t-test-main{border-bottom:1px solid #f5f5f5;margin-top:0\n}\n.t_test_main_open{margin-bottom:1rem;margin-top:1rem\n}\n.t-testcase-title{background-color:#fff;color:#000;display:block;font-size:.97rem;height:3.5rem;line-height:3.5rem;margin-top:0;overflow:hidden;padding:0 5rem 0 3rem;position:relative;text-overflow:ellipsis;white-space:nowrap;width:100%\n}\n.is_show_testcase_title{border-bottom:1px solid #e0e0e0\n}\n.t-show-steps{background-color:#fff;min-height:20rem;position:relative\n}\n.t-show-steps h6{color:#8e24aa;font-weight:400;margin:0 0 0 40px;padding-top:1.5rem\n}\n.t-show-steps pre{margin:0 0 0 40px;padding-top:.7rem\n}\n.img-roll-more{-webkit-transform:rotate(90deg);height:32px;margin-right:-3rem;margin-top:.7rem;position:relative;transform:rotate(90deg);width:32px\n}\n.img-roll-more,.roll-operate{display:inline-block;float:right\n}\n.roll-operate{background-color:#fff;padding-left:3rem;position:absolute;right:5rem;visibility:hidden;z-index:100\n}\n.showRollOperate{visibility:visible\n}\n.roll-operate img{display:inline;height:20px;margin-left:1rem;position:relative;width:20px\n}\n.t-testcase-title:hover .roll-operate{visibility:visible\n}\n.t_p1{background-color:rgba(245,107,107,.1);color:#f56c6c\n}\n.t_p1,.t_p2{border:1px solid #eee;border-radius:6px;font-weight:300;margin-left:-1.5rem;margin-right:1rem;padding:3px 10px\n}\n.t_p2{background-color:#e3f2fd;color:#1e88e5\n}\n.t_p3{background-color:#f1f8e9;border:1px solid #eee;border-radius:6px;color:#33691e;font-weight:300;margin-left:-1.5rem;margin-right:1rem;padding:3px 10px\n}\n.annex{position:relative\n}\n.annex:hover>img{-moz-opacity:.3;filter:alpha(Opacity=30);opacity:.3\n}\n.annex>img{border-radius:5px;height:148px;width:148px\n}\n.annex_delete{position:relative;right:90px;visibility:hidden;z-index:100\n}\n.h-annex{margin-top:-150px\n}\n.annex_delete>img{height:28px;width:28px\n}\n.annex:hover .annex_delete{visibility:visible\n}\n.img_scale{-webkit-transform:scale(3);position:relative;transform:scale(3);z-index:100\n}\n.review-area{margin-top:2rem\n}\n.review-box{border-top:1px solid #eee;font-size:.98rem;margin-top:2rem;min-height:5rem;outline:none;overflow-x:hidden;overflow-y:auto;padding:10px 18px 0;word-wrap:break-word\n}\n.review-area>.review-control{border:none;border-top:1px solid #eee;bottom:0;display:block;font-size:.9rem;line-height:1.6rem;min-height:5rem;outline:none;overflow:hidden;overflow-y:hidden;padding:.5rem 1rem 0;resize:none;right:0;width:100%\n}\n.custom-file{border:1px dashed #b2b2b2;display:inline-block;margin-bottom:0;min-height:5rem;position:relative;width:100%\n}\n.custom-file-input{line-height:5rem;margin:0;opacity:0;position:relative;width:100%;z-index:2\n}\n.custom-file-label{background-color:#fff;border:none;color:#757575;height:calc(2.25rem + 2px);line-height:1.5;margin-top:1.35rem;padding:.375rem .75rem;position:absolute;text-align:center;z-index:1\n}\n.custom-file-label:after{display:none\n}\n.file-upload-icon{height:36px;width:36px\n}\n.log-text-time,.log-text-user{font-size:.94rem\n}\n.log-text-user{color:#2973b7\n}\n.log-text-remark{background:#f5f5f5;border-radius:5px;color:#383838;margin-top:.7rem;padding:1rem;text-align:left!important;white-space:pre-line\n}\n.bug-query-selected{color:#9c27b0\n}\n.bug-query-selected-byme{color:#3f51b5\n}",""])},927:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container pg-test-edit",attrs:{id:"page-testcase-edit"}},[a("div",{staticClass:"row",staticStyle:{margin:"0"}},[a("div",{staticClass:"col-xl-10 col-lg-10 col-md-12 col-sm-12 col-12 offset-xl-1 offset-lg-1"},[a("form",{attrs:{sytle:"background-color:#fff;"}},[a("h3",{staticClass:"text-center my-5"},[e._v("编辑测试用例")]),e._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 testcase-label",attrs:{for:"CaseInfo"}},[e._v("基本信息")]),e._v(" "),a("el-select",{staticClass:"col-sm-3 col-5 px-0",attrs:{placeholder:"请选择产品",disabled:""},model:{value:e.CaseData.product_code,callback:function(t){e.$set(e.CaseData,"product_code",t)},expression:"CaseData.product_code"}},e._l(e.product_list,function(e){return a("el-option",{key:e.product_code,attrs:{label:e.product_code,value:e.product_code}})})),e._v(" "),a("el-cascader",{staticClass:"col-sm-3 col-5 ml-3 px-0",attrs:{placeholder:"选择模块",options:e.modules_list,filterable:""},model:{value:e.CaseData.module_id,callback:function(t){e.$set(e.CaseData,"module_id",t)},expression:"CaseData.module_id"}})],1),e._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 testcase-label",attrs:{for:"CaseInfo"}},[e._v("产品与模块")]),e._v(" "),a("el-select",{staticClass:"col-sm-3 col-5 px-0 e-select-support",attrs:{placeholder:"用例类型"},model:{value:e.CaseData.category,callback:function(t){e.$set(e.CaseData,"category",t)},expression:"CaseData.category"}},[a("el-option",{attrs:{value:"Functional",label:"功能"}}),e._v(" "),a("el-option",{attrs:{value:"compatibility",label:"兼容"}}),e._v(" "),a("el-option",{attrs:{value:"UI",label:"UI"}},[e._v("UI")]),e._v(" "),a("el-option",{attrs:{value:"performance",label:"性能"}}),e._v(" "),a("el-option",{attrs:{value:"other",label:"其它"}})],1),e._v(" "),a("el-select",{staticClass:"col-sm-3 col-5 ml-3 px-0",attrs:{placeholder:"优先级"},model:{value:e.CaseData.priority,callback:function(t){e.$set(e.CaseData,"priority",t)},expression:"CaseData.priority"}},[a("el-option",{attrs:{value:"P1"}},[e._v("P1")]),e._v(" "),a("el-option",{attrs:{value:"P2"}},[e._v("P2")]),e._v(" "),a("el-option",{attrs:{value:"P3"}},[e._v("P3")])],1)],1),e._v(" "),a("div",{attrs:{id:"t-testcase-functional"}},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 testcase-label",attrs:{for:"CaseTitle"}},[e._v("用例标题")]),e._v(" "),a("el-input",{staticClass:"px-0 col-sm-9",attrs:{type:"text",id:"inputTitle",placeholder:"用例标题...",maxlength:"50",required:""},model:{value:e.CaseData.title,callback:function(t){e.$set(e.CaseData,"title","string"==typeof t?t.trim():t)},expression:"CaseData.title"}})],1),e._v(" "),a("div",{staticClass:"form-group row"},[e._m(0),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.CaseData.precondition,expression:"CaseData.precondition",modifiers:{trim:!0}}],staticClass:"textarea-control col-sm-9",attrs:{type:"text",id:"inputPrecondition",placeholder:"测试用例执行前置条件...",maxlength:"500"},domProps:{value:e.CaseData.precondition},on:{input:function(t){t.target.composing||e.$set(e.CaseData,"precondition",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),a("div",{staticClass:"form-group row"},[e._m(1),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.CaseData.DataInput,expression:"CaseData.DataInput",modifiers:{trim:!0}}],staticClass:"textarea-control col-sm-9",attrs:{type:"text",id:"inputData",placeholder:"测试数据...",maxlength:"500",required:""},domProps:{value:e.CaseData.DataInput},on:{input:function(t){t.target.composing||e.$set(e.CaseData,"DataInput",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 testcase-label",attrs:{for:"CaseSteps"}},[e._v("操作步骤")]),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.CaseData.steps,expression:"CaseData.steps",modifiers:{trim:!0}}],staticClass:"textarea-control col-sm-9",attrs:{type:"text",id:"inputSteps",placeholder:"测试步骤...",maxlength:"1000",wrap:"hard",rows:"7",required:""},domProps:{value:e.CaseData.steps},on:{input:function(t){t.target.composing||e.$set(e.CaseData,"steps",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 testcase-label",attrs:{for:"CaseOutput"}},[e._v("预期结果")]),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.CaseData.expected_result,expression:"CaseData.expected_result",modifiers:{trim:!0}}],staticClass:"textarea-control col-sm-9",attrs:{type:"text",rows:"4",id:"inputOutput",placeholder:"测试预期结果...",maxlength:"500",required:""},domProps:{value:e.CaseData.expected_result},on:{input:function(t){t.target.composing||e.$set(e.CaseData,"expected_result",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),a("div",{staticClass:"form-group row"},[e._m(2),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.CaseData.remark,expression:"CaseData.remark",modifiers:{trim:!0}}],staticClass:"textarea-control col-sm-9",attrs:{type:"text",rows:"4",id:"inputRemarks",placeholder:"请输入备注...",maxlength:"1000",required:""},domProps:{value:e.CaseData.remark},on:{input:function(t){t.target.composing||e.$set(e.CaseData,"remark",t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),a("div",{staticClass:"d-flex justify-content-center my-5"},[a("button",{staticClass:"btn btn-transparent",attrs:{type:"button"},on:{click:function(t){e.$router.go(-1)}}},[e._v("返回")]),e._v(" "),a("button",{staticClass:"btn btn-submit mx-5 px-3",attrs:{type:"button",disabled:e.isButtonDisabled},on:{click:e.EditTestCase}},[e._v("提交修改")])])])])])])])};i._withStripped=!0;var n=a(4),r=a.n(n),o={head:function(){return{title:"HDesk - 编辑测试用例"}},validate:function(e){return!!e.query.case_id},layout:"head",data:function(){return{product_list:[],modules_list:[],msg:"",isButtonDisabled:!1,case_id:null,CaseData:{product_code:null,category:null,priority:null}}},computed:{seleted_product:function(){return this.CaseData.product_code}},watch:{seleted_product:function(e,t){this.seleted_product&&this.getModule()}},created:function(){this.$route.query.case_id?(this.case_id=this.$route.query.case_id,this.getCaseDetails()):this.$router.go(-1)},methods:{getCaseDetails:function(){var e=this;r.a.get("/api/qa/testcase/details?case_id="+this.case_id).then(function(t){if(2e4===t.data.status){var a=t.data.data,i=new Array;i[0]=a.m1_id,i[1]=a.m2_id,e.CaseData.module_id=i,e.CaseData.product_code=a.product_code,e.CaseData.case_id=a.case_id,e.CaseData.product_code=a.product_code,e.CaseData.priority=a.priority,e.CaseData.title=a.title,e.CaseData.category=a.category,e.CaseData.precondition=a.precondition,e.CaseData.DataInput=a.DataInput,e.CaseData.steps=a.steps,e.CaseData.expected_result=a.expected_result,e.CaseData.remark=a.remark}else e.$router.go(-1)})},getModule:function(){var e=this;r.a.get("/api/pm/get_module?product_code="+this.seleted_product).then(function(t){2e4===t.data.status?e.modules_list=t.data.data:e.Msg=t.data.msg})},EditTestCase:function(e){var t=this,a=t.CaseData.title,i=t.CaseData.DataInput,n=t.CaseData.expected_result,o=t.CaseData.steps;a.length<5|a.length>50?this.$notify.error({title:"错误",message:"标题有效长度为5到50位"}):i.trim().length>500?this.$notify.error({title:"错误",message:"测试输入最多为500个字符"}):n.trim().length<6|n.trim().length>500?this.$notify.error({title:"错误",message:"预期结果的有效长度为6到500位，且不能为空"}):o.trim().length<10|o.trim().length>500?this.$notify.error({title:"错误",message:"操作步骤的有效长度为10到500"}):this.CaseData.remark.length>1e3?this.$notify.error({title:"错误",message:"备注输入太长了,有效最大长度为1000"}):r()({method:"post",url:"/api/qa/testcase/edit",data:JSON.stringify(t.CaseData),transformRequest:[function(e){return t.isButtonDisabled=!0,e}]}).then(function(e){2e4===e.data.status?t.$router.go(-1):(t.isButtonDisabled=!1,t.$notify.error({title:"错误",message:e.data.msg}))})}}},s=(a(919),a(10)),l=Object(s.a)(o,i,[function(){var e=this.$createElement,t=this._self._c||e;return t("label",{staticClass:"col-sm-2 testcase-label",attrs:{for:"CasePrecondition"}},[this._v("\n              执行前置条件"),t("p",{staticClass:"label-desc"},[this._v("(选填)")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{staticClass:"col-sm-2 testcase-label",attrs:{for:"CaseInput"}},[this._v("\n              测试数据"),t("p",{staticClass:"label-desc"},[this._v("(选填)")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{staticClass:"col-sm-2 testcase-label",attrs:{for:"CaseRemarks"}},[this._v("\n              备注"),t("p",{staticClass:"label-desc"},[this._v("(选填)")])])}],!1,null,null,null);l.options.__file="edit.vue";t.default=l.exports}}]);