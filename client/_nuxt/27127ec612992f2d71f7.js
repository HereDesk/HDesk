(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{305:function(t,a,e){var i=e(322);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,e(20).default)("44fe81ac",i,!1,{sourceMap:!1})},321:function(t,a,e){"use strict";var i=e(305);e.n(i).a},322:function(t,a,e){(t.exports=e(19)(!1)).push([t.i,"\n.main-loading-page{padding:15%;text-align:center\n}\n@media (max-width:576px){\n.main-loading-page{margin-top:50%\n}\n}\n.loading h1{color:#ccc;font-size:1.4rem;letter-spacing:.1em\n}\n.loading span:nth-of-type(2){-webkit-animation-delay:.2s;animation-delay:.2s;background:#008fb2\n}\n.loading span:nth-of-type(3){-webkit-animation-delay:.4s;animation-delay:.4s;background:#009b9e\n}\n.loading span:nth-of-type(4){-webkit-animation-delay:.6s;animation-delay:.6s;background:#00a77d\n}\n.loading span:nth-of-type(5){-webkit-animation-delay:.8s;animation-delay:.8s;background:#00b247\n}\n.loading span:nth-of-type(6){-webkit-animation-delay:1s;animation-delay:1s;background:#5ab027\n}\n.loading span:nth-of-type(7){-webkit-animation-delay:1.2s;animation-delay:1.2s;background:#a0b61e\n}\n.loading span{-webkit-animation:loading 1s infinite alternate;animation:loading 1s infinite alternate;background:#007db6;border-radius:.6em;display:inline-block;height:.7em;margin:.19em;vertical-align:middle;width:.7em\n}\n@-webkit-keyframes loading{\n0%{opacity:0\n}\nto{opacity:1\n}\n}\n@keyframes loading{\n0%{opacity:0\n}\nto{opacity:1\n}\n}",""])},324:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("transition",{attrs:{name:"loading"}},[e("div",{staticClass:"main-loading-page loading"},[e("h1",[t._v("Loading")]),t._v(" "),e("span"),t._v(" "),e("span"),t._v(" "),e("span"),t._v(" "),e("span"),t._v(" "),e("span"),t._v(" "),e("span"),t._v(" "),e("span")])])],1)};i._withStripped=!0;e(321);var o=e(10),d=Object(o.a)({},i,[],!1,null,null,null);d.options.__file="loading.vue";a.a=d.exports},419:function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAWlBMVEUAAACFhYWNjY2IiIiPj4+JiYmJiYmQkJCLi4uOjo5/f3+JiYmKioqMjIyPj4+Hh4eOjo6Hh4eQkJCMjIyJiYmNjY2BgYGMjIyJiYmOjo6Ojo6Ojo6WlpaRkZEfR2DSAAAAHHRSTlMAI9Ux64Fg+casGUv+5/FUi2jOtYlsKnfu3pyF1oJCsgAAAMRJREFUKM99klkWgyAMRZMwtiBqnRX3v83WIZWjrfmB5HJeJmA30dneexq1gNTaQs6SrKXPUbRHPKf4Uk4gCqdekXKOl8EoZAeVCeX+Pkid6mppVh9pPVNihqWEKdZwsjoWACIjPAOkTEAzq9VxKuFqbqCSbr138fH8AicryGjr9flIiKAMvEW4ELSeAZMDsBQTltqTMwk5J9/LZW2NXO7/BqH4NZJpSTSch1iaTUSb89hDfr+o62pvPwOb0CN539uO5/AG9MEKMZXnTqwAAAAASUVORK5CYII="},420:function(t,a,e){var i=e(681);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,e(20).default)("0810e367",i,!1,{sourceMap:!1})},679:function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAAZlBMVEUAAABubm5wcHBwcHBubm5vb29vb29wcHBvb29wcHBwcHBwcHBvb29vb29vb29ycnJvb29wcHBvb29vb29vb29vb29vb29tbW1mZmZvb29vb29vb29wcHBvb29wcHBvb29wcHBwcHDQXJsQAAAAIXRSTlMAE6UNB+3f0UDz1rw1KiQd9ejJxLOFazEK46yXkHxZVUlT4WXbAAAAjklEQVQoz9WQ2xKDIAxEEUXBG9Vatffu//9kM9N2xDL7rvtCmENCdtV+lCacJaXmfYVrGMuOeNHGCg/KNEbKrrhTdsJtqe2ajQhMXA51yJ4YwrV70y43iypbGz77Xz25fv6PKv8G2ZoyjYLMi/lzyqtIvpOfZH7nVSyZN0ighoTdOK3FE1ENWEU1WbUBvQF6agUvDQWVKgAAAABJRU5ErkJggg=="},680:function(t,a,e){"use strict";var i=e(420);e.n(i).a},681:function(t,a,e){(t.exports=e(19)(!1)).push([t.i,"\n.add_m_a{margin-top:2rem\n}\n.add_m_a,.add_m_b{color:#2962ff;font-size:.9rem;font-weight:300\n}\n.add_m_b{float:right\n}\n.module_desc{color:#757575;font-size:.9rem;font-weight:300\n}\n.ul_module_a li{line-height:1.5rem;margin-top:2rem;padding-left:1rem\n}\n.ul_module_b{margin-bottom:5rem\n}\n.ul_module_b li{border-bottom:1px solid #f5f5f5;line-height:4rem;padding-left:1rem\n}\n.selected_a_module{border-left:5px solid #1565c0;color:#1565c0!important;font-size:.95rem\n}\n.module_b .form-control{border:0!important;border-bottom:1px solid #bdbdbd!important;border-radius:0!important;box-shadow:none;outline:none!important\n}\n.m2edit:focus{border-bottom:1px solid #1565c0;color:#1565c0;outline:none\n}",""])},934:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"container",attrs:{id:"page-module"}},[i("div",{staticClass:"row pt-5",attrs:{id:"module-product"}},[i("nav",{staticClass:"navbar navbar-expand-lg mr-auto"},[i("a",{staticClass:"navbar-brand"},[t._v("模块管理")]),t._v(" "),i("el-dropdown",{staticClass:"ml-3",attrs:{trigger:"click"}},[i("span",{staticClass:"dashboard-product"},[i("span",{staticClass:"el-dropdown-link"},[t._v(" "+t._s(t.selected_product||""))])]),t._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.product_list,function(a){return i("el-dropdown-item",{key:a.id},[i("span",{on:{click:function(e){t.handleCommand(a)}}},[t._v(t._s(a.value))])])}))],1)],1)]),t._v(" "),i("div",{staticClass:"row mt-5",attrs:{id:"module_a"}},[i("div",{staticClass:"col-xl-3 col-sm-12 col-12"},[i("h5",{staticClass:"font-weight-light"},[t._v("一级模块")]),t._v(" "),i("p",{staticClass:"add_m_a",attrs:{"data-toggle":"modal","data-target":"#add_module_a"}},[t._v(" + 一级模块")]),t._v(" "),i("p",{staticClass:"divider"}),t._v(" "),i("ul",{staticClass:"pl-0 ul_module_a"},t._l(t.m1_list,function(a){return i("li",{key:a.id,class:{selected_a_module:t.selected_a_module==a.id},attrs:{value:a.m1},on:{click:function(e){t.handleModuleA(a.id)}}},[t._v(" - "+t._s(a.m1))])}))]),t._v(" "),i("div",{staticClass:"col-xl-9 col-sm-12 col-12",attrs:{id:"module_b"}},[i("h5",{staticClass:"font-weight-light"},[t._v("二级模块")]),t._v(" "),i("div",{staticClass:"module_b p-3 mb-3"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.b_module_data.module_b_name,expression:"b_module_data.module_b_name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"二级模块名称输入后，回车即可保存成功"},domProps:{value:t.b_module_data.module_b_name},on:{keyup:function(a){if(!("button"in a)&&t._k(a.keyCode,"enter",13,a.key,"Enter"))return null;t.addModuleB()},input:function(a){a.target.composing||t.$set(t.b_module_data,"module_b_name",a.target.value)}}})]),t._v(" "),i("ul",{staticClass:"ul_module_b pl-3"},t._l(t.m2_list,function(a){return i("li",{key:a.id,staticClass:"d-flex"},[i("span",[t._v("-  ")]),t._v(" "),i("span",{staticClass:"flex-grow-1 m2edit",attrs:{contenteditable:"true"},on:{keyup:function(e){t.changeData(e,a)}}},[t._v(t._s(a.m2)+"  ")]),t._v(" "),i("div",{class:{visible:t.editM2.id===a.id,invisible:t.editM2.id!==a.id},on:{click:function(a){t.SaveEditM2()}}},[i("img",{staticClass:"mr-3",attrs:{src:e(679)}})]),t._v(" "),i("div",{on:{click:function(e){t.delM2(a)}}},[i("img",{staticClass:"mr-3",attrs:{src:e(419)}})])])}))])]),t._v(" "),i("div",{staticClass:"modal fade",attrs:{id:"add_module_a",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[i("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header"},[i("h5",{staticClass:"modal-title"},[t._v(t._s(t.selected_product)+" 添加一级模块 ")])]),t._v(" "),i("div",{staticClass:"modal-body my-3"},[i("div",{staticClass:"form-group row col-md-auto mx-3"},[i("label",{attrs:{for:"ModuleA"}},[t._v("模块名称")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.a_module_data.ModuleA,expression:"a_module_data.ModuleA"}],staticClass:"form-control",attrs:{type:"text",maxlength:"20",rows:"5",placeholder:"请输入名称..."},domProps:{value:t.a_module_data.ModuleA},on:{input:function(a){a.target.composing||t.$set(t.a_module_data,"ModuleA",a.target.value)}}})])]),t._v(" "),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-cancel",attrs:{type:"button","data-dismiss":"modal"}},[t._v("关闭")]),t._v(" "),i("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:function(a){t.addModuleA()}}},[t._v("提交")])])])])])])};i._withStripped=!0;e(41);var o=e(4),d=e.n(o),n=(e(324),{head:function(){return{title:"HDesk - 产品模块维护"}},layout:"head",data:function(){return{selected_product:"",product_list:[],msg:"",selected_a_module:null,m1_list:[],a_module_data:{product_code:"",ModuleA:""},m2_list:[],b_module_data:{module_a_id:"",module_b_name:""},editM2:{id:null,m2:null}}},computed:{QueryBuilder:function(){var t={};return t.product_code=this.selected_product,t}},watch:{product_list:function(t,a){this.product_list.length>0&&!this.selected_product&&(this.selected_product=this.product_list[0].product_code,this.getModuleA())},selected_product:function(t,a){this.getModuleA()},QueryBuilder:function(t,a){this.$router.replace({path:"/app/products/modules",query:this.QueryBuilder})},selected_a_module:function(t,a){this.getModuleB()}},created:function(){var t=this.$route.query;t.product_code&&(this.selected_product=t.product_code),this.getProductList()},methods:{getProductList:function(){var t=this;d.a.get("/api/pm/new_product_release").then(function(a){2e4===a.data.status?t.product_list=a.data.data:t.msg=a.data.msg}).catch(function(t){})},getModuleA:function(){var t=this;d.a.get("/api/pm/module/1/list?product_code="+this.selected_product).then(function(a){2e4===a.data.status?(t.m1_list=a.data.data,a.data.data.length>0&&(t.selected_a_module=a.data.data[0].id)):t.msg=a.data.msg})},handleModuleA:function(t){this.selected_a_module=t},addModuleA:function(){var t=this;t.a_module_data.product_code=t.selected_product,d()({method:"post",url:"/api/pm/module/1/add",data:JSON.stringify(t.a_module_data)}).then(function(a){2e4===a.data.status?($("#add_module_a").modal("hide"),t.a_module_data.ModuleA="",t.getModuleA(),t.$notify.success({title:"成功",message:a.data.msg})):t.$notify.error({title:"提示",message:a.data.msg})})},getModuleB:function(){var t=this;d.a.get("/api/pm/module/2/list?module_a_id="+this.selected_a_module).then(function(a){2e4===a.data.status?t.m2_list=a.data.data:t.msg=a.data.msg})},addModuleB:function(){var t=this;if(!t.selected_a_module)return t.$notify.error({title:"提示",message:"请选择一级模块"});t.b_module_data.module_a_id=t.selected_a_module,d()({method:"post",url:"/api/pm/module/2/add",data:JSON.stringify(t.b_module_data)}).then(function(a){2e4===a.data.status?(t.getModuleB(),t.b_module_data.module_b_name="",t.$notify.success({title:"成功",message:a.data.msg})):t.$notify.error({title:"提示",message:a.data.msg})})},changeData:function(t,a){this.editM2.id=a.id,this.editM2.m2=t.target.innerText},SaveEditM2:function(){if(0!==this.editM2.m2.length){var t=this,a=this.editM2.m2;this.editM2.m2=a.replace(/(^\s*)|(\s*$)/g,""),d()({method:"post",url:"/api/pm/module/2/edit",data:JSON.stringify(this.editM2)}).then(function(a){2e4===a.data.status?(t.$notify.success({title:"成功",message:a.data.msg}),t.getModuleB()):t.$notify.error({title:"提示",message:a.data.msg})})}else this.$notify.error({title:"提示",message:"不能提交空文白哦，如需删除，请点击删除操作"})},delM2:function(t){var a=this;d.a.get("/api/pm/module/2/del?id="+t.id).then(function(t){2e4===t.data.status?(a.$notify.success({title:"成功",message:t.data.msg}),a.getModuleB()):a.$notify.error({title:"提示",message:t.data.msg})})}}}),s=(e(680),e(10)),l=Object(s.a)(n,i,[],!1,null,null,null);l.options.__file="modules.vue";a.default=l.exports}}]);