(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{435:function(t,s,a){var e=a(816);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);(0,a(20).default)("e0d590f6",e,!1,{sourceMap:!1})},815:function(t,s,a){"use strict";var e=a(435);a.n(e).a},816:function(t,s,a){(t.exports=a(19)(!1)).push([t.i,"\n.link-item:hover p{color:#1565c0!important\n}\n.link-item img:hover{-webkit-transform:scale(1.1);-webkit-transform:all 1s ease 0s;transform:scale(1.1);transition:all 1s ease 0s\n}\n.ul_modules li{line-height:1.5rem;margin-top:2rem;padding-left:1rem\n}\n.selected_data{border-left:5px solid #1565c0;color:#1565c0!important;font-size:1rem\n}\n.ul_perm li{display:inline;font-size:.96rem;line-height:2.5rem;min-width:10rem;word-break:break-all;word-wrap:break-word\n}",""])},942:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"container",attrs:{id:"page-permissions"}},[t._m(0),t._v(" "),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-xl-3 col-sm-12 col-12",attrs:{id:"permissions-group"}},[a("p",{staticClass:"divider"}),t._v(" "),a("ul",{staticClass:"pl-0 ul_link"},t._l(t.group_list,function(s){return"admin"!=s.group?a("li",{key:s.id,class:{selected_data:t.PermissionsData.group==s.group},attrs:{value:s.group},on:{click:function(a){t.select_group(s.group)}}},[t._v("\n          "+t._s(s.name)+"\n        ")]):t._e()}))]),t._v(" "),a("div",{staticClass:"col-xl-9 col-sm-12 col-12",attrs:{id:"permissions-management"}},[t._m(1),t._v(" "),t._l(t.permissions_list,function(s){return a("div",{key:s.id,staticClass:"mb-5 mt-5"},[a("h5",[t._v(t._s(s.flag))]),t._v(" "),a("p",{staticClass:"divider"}),t._v(" "),a("ul",{staticClass:"pl-0 ul_perm"},t._l(s.data,function(s){return a("li",{key:s.id,staticClass:"mr-3"},[a("input",{staticClass:"mr-2",attrs:{type:"checkbox"},domProps:{value:s.permissions_id,checked:1===s.is_allow},on:{click:function(a){t.MangePermissions(a,s.permissions_id)}}}),t._v(t._s(s.name)+"\n          ")])}))])})],2)]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"add_router",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(2),t._v(" "),a("div",{staticClass:"modal-body my-3"},[a("div",{staticClass:"form-group row col-md-auto mx-3"},[a("label",{attrs:{for:"page_module"}},[t._v("选择模块")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.PermissionsData.flag,expression:"PermissionsData.flag"}],staticClass:"select-control form-border-bottom",on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.PermissionsData,"flag",s.target.multiple?a:a[0])}}},t._l(t.modules,function(s){return a("option",{key:s.id,domProps:{value:s.value}},[t._v(t._s(s.name))])}))]),t._v(" "),a("div",{staticClass:"form-group row col-md-auto mx-3"},[a("label",{attrs:{for:"permissions_name"}},[t._v("权限名称")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.PermissionsData.name,expression:"PermissionsData.name"}],staticClass:"form-control",attrs:{type:"text",maxlength:"100",placeholder:"请输入页面名称..."},domProps:{value:t.PermissionsData.name},on:{input:function(s){s.target.composing||t.$set(t.PermissionsData,"name",s.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group row col-md-auto mx-3"},[a("label",{attrs:{for:"permissions_name"}},[t._v("权限code")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.PermissionsData.code,expression:"PermissionsData.code"}],staticClass:"form-control",attrs:{type:"text",maxlength:"100",placeholder:"请输入页面名称..."},domProps:{value:t.PermissionsData.code},on:{input:function(s){s.target.composing||t.$set(t.PermissionsData,"code",s.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group row col-md-auto mx-3"},[a("label",{attrs:{for:"permissions_url"}},[t._v("url")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.PermissionsData.url,expression:"PermissionsData.url"}],staticClass:"form-control",attrs:{type:"text",maxlength:"100",placeholder:"请输入页面url..."},domProps:{value:t.PermissionsData.url},on:{input:function(s){s.target.composing||t.$set(t.PermissionsData,"url",s.target.value)}}})])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-cancel",attrs:{type:"button","data-dismiss":"modal"}},[t._v("关闭")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:function(s){t.SavePermissions()}}},[t._v("提交")])])])])])])};e._withStripped=!0;var i=a(4),o=a.n(i),r={head:function(){return{title:"HDesk - 接口权限管理"}},data:function(){return{permissions_list:[],modules:[],PermissionsData:{group:"test",name:"",code:"",url:""},group_list:[]}},computed:{},watch:{},created:function(){this.get_group_list(),this.getPermissionsList("test")},methods:{get_group_list:function(){var t=this;o.a.get("/api/user/group").then(function(s){2e4===s.data.status?t.group_list=s.data.data:t.$notify.error({title:"提示",message:res.data.msg})})},select_group:function(t){this.PermissionsData.group=t,this.getPermissionsList(t)},getPermissionsList:function(t){var s=this;o.a.get("/api/system/permissions/list?group="+t).then(function(t){2e4===t.data.status?s.permissions_list=t.data.data:(s.permissions_list=[],s.$notify.error({title:"提示",message:t.data.msg}))})},SavePermissions:function(){var t=this;o()({method:"post",url:"/api/system/permissions/create",data:JSON.stringify(t.PermissionsData)}).then(function(s){2e4===s.data.status?($("#add_router").modal("hide"),t.getPermissionsList(t.PermissionsData.flag),t.$notify.success({title:"成功",message:s.data.msg})):t.$notify.error({title:"提示",message:s.data.msg})})},MangePermissions:function(t,s){var a={is_allow:null,permissions_id:null,group:null};t.target.checked?a.is_allow=1:a.is_allow=-1,a.permissions_id=s,a.group=this.PermissionsData.group;var e=this;o()({method:"post",url:"/api/system/permissions/manage",data:JSON.stringify(a)}).then(function(t){2e4===t.data.status?(e.getPermissionsList(e.PermissionsData.group),e.$notify.success({title:"成功",message:t.data.msg})):e.$notify.error({title:"提示",message:t.data.msg})})}}},n=(a(815),a(10)),l=Object(n.a)(r,e,[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"row mt-5",attrs:{id:"module-product"}},[s("nav",{staticClass:"navbar navbar-expand-lg mr-auto"},[s("a",{staticClass:"navbar-brand"},[this._v("权限管理")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticStyle:{display:"block"}},[s("button",{staticClass:"btn btn-create float-right",attrs:{type:"btn","data-toggle":"modal","data-target":"#add_router"}},[this._v("+权限")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title"},[this._v("添加权限")])])}],!1,null,null,null);l.options.__file="index.vue";s.default=l.exports}}]);