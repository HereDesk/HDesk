(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{331:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row my-5",attrs:{id:"data-paging"}},[a("div",{staticClass:"col-auto mr-auto"},[t.total>t.pageSize?a("nav",{attrs:{"aria-label":"Page navigation"}},[a("ul",{staticClass:"pagination"},[t.FirstPage!=t.pageNumber&t.LastPage>5?a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{"aria-label":"Previous"},on:{click:function(e){t.handleChange("pn",e)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("<")])])]):t._e(),t._v(" "),t._l(t.PageList,function(e){return a("li",{key:e.id,staticClass:"page-item",class:{active:e===parseInt(t.pageNumber),disabled:"..."==e},on:{click:function(e){t.handleChange("pn",e)}}},[a("a",{staticClass:"page-link"},[t._v(t._s(e))])])}),t._v(" "),t.LastPage!=t.pageNumber&t.LastPage>5?a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{"aria-label":"Next"},on:{click:function(e){t.handleChange("pn",e)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v(">")])])]):t._e()],2)]):t._e()]),t._v(" "),t.total?a("div",{staticClass:"col-auto pagination pt-2"},[t.total>0?a("span",[t._v("共 "+t._s(t.total)+" 条 ")]):t._e(),t._v(" "),t.total>=10?a("span",{on:{click:function(e){t.handleChange("ps",e)}}},[t._v(t._s(t.pageSize)+"条/页")]):t._e()]):t._e()])])};i._withStripped=!0;a(333),a(4);var s={props:{total:Number},data:function(){return{FirstPage:1,pageNumber:this.$route.query.pageNumber||1,pageSize:this.$route.query.pageSize||10}},computed:{LastPage:function(){return Math.ceil(this.total/this.pageSize)},PageList:function(){new Array;var t=parseInt(this.LastPage),e=parseInt(this.pageNumber);if(t<=5){for(var a=new Array,i=0;i<t;i++)a.push(i+1);return a}return 6==t?[1,2,3,4,5,6]:t>6?1==e|e==t?[1,2,"...",t-1,t]:2==e?[1,2,"...",t-1,t]:e==t-1?[1,2,"...",e,t]:[1,"...",e,"...",t]:void 0}},methods:{handleChange:function(t,e){if("ps"===t&&this.pageSize<50&&(this.pageNumber=1,this.pageSize=parseInt(this.pageSize)+20),"pn"===t){var a=e.target.innerText;">"==a&&(this.pageNumber=parseInt(this.pageNumber)+1),"<"==a&&(this.pageNumber=parseInt(this.pageNumber)-1),parseInt(a)&&(this.pageNumber=a)}this.$emit("PsPn",this.pageSize,this.pageNumber)}}},n=a(10),l=Object(n.a)(s,i,[],!1,null,null,null);l.options.__file="Pagination.vue";e.a=l.exports},450:function(t,e,a){var i=a(905);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a(20).default)("16c1747e",i,!1,{sourceMap:!1})},904:function(t,e,a){"use strict";var i=a(450);a.n(i).a},905:function(t,e,a){(t.exports=a(19)(!1)).push([t.i,"\n.suitepart{border:1px solid #eee;border-radius:8px;min-height:35rem\n}\n.testsuite-head{display:inline!important\n}\n.testsuite-title{display:inline;font-size:1.15rem;line-height:60px;padding:0 1rem\n}\n.testsuite-head .el-input__inner{border:none!important;border-radius:0!important\n}\n.testsuite-head .el-cascader__label{font-size:.92rem!important;font-weight:300\n}\n.case_list li{font-size:.9rem;line-height:2.5rem\n}\n.case_list li:hover{color:#3385ff\n}\n.cell-operate{margin-top:20%\n}\n@media (max-width:576px){\n.cell-operate{margin:2rem 0\n}\n}\n.btn-load{background-color:#3385ff;border-radius:15px;color:#fff;margin:1rem 0\n}\n.btn-load,.btn-load-all{font-size:.86rem\n}\n.btn-load-all:hover{color:#3385ff;outline:none\n}\n.btn-load-all:focus{outline:0!important\n}\n.loader-pagination span{font-size:.93rem!important\n}",""])},952:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",attrs:{id:"page-testcase-loader"}},[a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-xl-5 col-lg-5 col-md-5 suitepart",attrs:{id:"no-add"}},[a("div",{staticClass:"testsuite-head",attrs:{id:"testsuite-head-left"}},[a("h5",{staticClass:"testsuite-title"},[t._v("选择 \n          "),t.LeftTotal?a("span",[t._v(t._s(t.LeftCheckedNum)+"/"+t._s(t.LeftTotal))]):t._e()]),t._v(" "),a("el-cascader",{attrs:{placeholder:"按模块选择测试用例",options:t.modules_list,filterable:"","change-on-select":""},model:{value:t.selected_mod_id,callback:function(e){t.selected_mod_id=e},expression:"selected_mod_id"}})],1),t._v(" "),a("div",{staticClass:"divider"}),t._v(" "),a("ul",{staticClass:"case_list"},t._l(t.TestCaseList,function(e){return a("li",{key:e.id},[a("input",{attrs:{type:"checkbox",id:"item.case_id",value:"item.case_id"},on:{click:function(a){t.LeftCheckedTestCaseID(e.case_id,a)}}}),t._v("  "+t._s(e.title)+"\n        ")])})),t._v(" "),a("div",{staticClass:"loader-pagination"},[a("Pagination",{attrs:{total:t.LeftTotal},on:{PsPn:t.getPsPn1}})],1)]),t._v(" "),a("div",{staticClass:"col-xl-2 col-lg-2 col-md-2 text-center cell-operate"},[a("button",{staticClass:"btn btn-load",attrs:{type:"btn"},on:{click:function(e){t.SaveLeftChecked()}}},[t._v(" > 添加已选用例")]),t._v(" "),a("button",{staticClass:"btn btn-load-all",attrs:{type:"btn"},on:{click:function(e){t.SaveLeftModulesAll(e)}}},[t._v("添加当前模块"),a("br"),t._v("所有用例")])]),t._v(" "),a("div",{staticClass:"col-xl-5 col-lg-5 col-md-5 suitepart"},[a("div",{staticClass:"testsuite-head",attrs:{id:"testsuite-head-right"}},[a("h5",{staticClass:"testsuite-title"},[t._v("TestSuite测试用例列表")]),t._v(" "),t.RightTotal?a("span",[t._v(t._s(t.RightTotal))]):t._e()]),t._v(" "),a("div",{staticClass:"divider"}),t._v(" "),a("ul",{staticClass:"pl-2 mt-3 case_list"},t._l(t.RightListData,function(e){return a("li",{key:e.id},[t._v("\n          "+t._s(e.id)+".  "+t._s(e.title)+"\n        ")])})),t._v(" "),a("div",{staticClass:"loader-pagination"},[a("Pagination",{attrs:{total:t.RightTotal},on:{PsPn:t.getPsPn2}})],1)])])])};i._withStripped=!0;var s=a(4),n=a.n(s),l=a(331),r=a(835),o={layout:"head",components:{Pagination:l.a},validate:function(t){var e=t.query;return!(!e.suite_id||!e.product_code)},data:function(){return{product_code:this.$route.query.product_code,suite_id:this.$route.query.suite_id,RightListData:[],RightQueryBuilder:{suite_id:this.$route.query.suite_id,pageSize:10,pageNumber:1},RightTotal:null,modules_list:[],selected_mod_id:[],LefteQueryBuilder:{product_code:null,m1_id:null,m2_id:null,pageSize:10,pageNumber:1},LeftTotal:null,LeftCheckedNum:0,TestCaseList:[],LeftCheckedCellData:{suite_id:this.$route.query.suite_id,case_data:[]}}},watch:{selected_mod_id:{handler:function(t,e){this.LefteQueryBuilder.m1_id=this.selected_mod_id[0],this.LefteQueryBuilder.m2_id=this.selected_mod_id[1]},deep:!0},LefteQueryBuilder:{handler:function(t,e){this.getLeftData()},deep:!0},RightQueryBuilder:{handler:function(t,e){this.getRightData()},deep:!0}},created:function(){this.getModule(),this.getRightData()},methods:{getPsPn1:function(t,e){this.LefteQueryBuilder.pageSize=t,this.LefteQueryBuilder.pageNumber=e},getPsPn2:function(t,e){this.RightQueryBuilder.pageSize=t,this.RightQueryBuilder.pageNumber=e},getModule:function(t){var e=this;n.a.get("/api/pm/get_module?product_code="+this.product_code).then(function(t){2e4===t.data.status?e.modules_list=t.data.data:e.Msg=t.data.msg})},getLeftData:function(){var t=this;this.LefteQueryBuilder.product_code=this.product_code,n.a.get("/api/qa/testcase/valid_list",{params:this.LefteQueryBuilder}).then(function(e){2e4===e.data.status?(t.TestCaseList=e.data.data,t.LeftTotal=e.data.total):t.$notify.error({title:"提示",message:e.data.msg})})},getRightData:function(){var t=this;n.a.get("/api/qa/testsuite/cell/brief_list",{params:this.RightQueryBuilder}).then(function(e){2e4===e.data.status?(t.RightListData=e.data.data,t.RightTotal=e.data.total):t.$notify.error({title:"提示",message:e.data.msg})})},LeftCheckedTestCaseID:function(t,e){var a=e.target.checked,i=this.LeftCheckedCellData.case_data;t&&a?!(r.indexOf(i,t)>=0)&&i.push(t):r.pull(i,t),this.LeftCheckedNum=i.length,this.LeftCheckedCellData.case_data=i},SaveLeftChecked:function(){var t=this;0!==this.LeftCheckedCellData.case_data.length?n()({method:"POST",url:"/api/qa/testsuite/cell/add",data:JSON.stringify(this.LeftCheckedCellData)}).then(function(e){2e4===e.data.status?(t.getRightData(),t.getLeftData(),t.$notify.success({title:"成功",message:e.data.msg})):t.$notify.error({title:"错误",message:e.data.msg})}):this.$notify.error({title:"错误",message:"请选择后再提交"})},SaveLeftModulesAll:function(t){var e=this;if(0!==this.selected_mod_id.length)if(0!==this.TestCaseList.length){var a={m1:null,m2:null,suite_id:this.$route.query.suite_id};a.m1=this.selected_mod_id[0],a.m2=this.selected_mod_id[1],n()({method:"POST",url:"/api/qa/testsuite/cell/add",data:JSON.stringify(a)}).then(function(t){2e4===t.data.status?(e.getRightData(),e.getLeftData(),e.$notify.success({title:"成功",message:t.data.msg})):e.$notify.warning({title:"提示",message:t.data.msg})})}else this.$notify.warning({title:"提示",message:"您选择的模块下，没有查任何用例哦"});else this.$notify.warning({title:"提示",message:"请先选择模块"})}}},d=(a(904),a(10)),u=Object(d.a)(o,i,[],!1,null,null,null);u.options.__file="loader.vue";e.default=u.exports}}]);